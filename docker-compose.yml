version: "2.2"
services:

  jupyterlab:
    build:
      context: .
      dockerfile: Dockerfile_lab
    image: "grader-lap:latest"
    ports:
      - "8000:8000"
    volumes:
      - ./jupyterhub_labextension_config.py:/jupyterhub_labextension_config.py
    depends_on:
      - grader_service

  grader_service:
    build:
      context: .
      dockerfile: Dockerfile_service
    image: "grader_service:latest"
    ports:
      - "4010:4010"
    volumes:
        # used instead of COPY inside Dockerfile
        # COPY ./grader_service_config.py /var/lib/grader-service/grader_service_config.py
        # makes it easier to change the values.
      - ./grader_service_config.py:/var/lib/grader-service/grader_service_config.py
